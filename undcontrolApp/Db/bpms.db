### BPM Records for C02 based on C23
# This uses inputs from sofb readback, which is precalculated position (accel. call bumps).  No need to smooth the signal.

# See CSX for actual calcuations used at C23 (predates sofb calcuation)


#record(ai,   "XF:02ID-ID{BPM}Val:Alpha-I"){
#  info(autosaveFields, "VAL")
#  field(VAL,  "0.25")
#  field(FLNK, "XF:02ID-ID{BPM}Val:Alpha-I_")
#  field(PINI, "1")
#}

#record(seq, "XF:02ID-ID{BPM}Val:Alpha-I_"){
#  field(DOL1, "XF:02ID-ID{BPM}Val:Alpha-I NPP")
#  field(DOL2, "XF:02ID-ID{BPM}Val:Alpha-I NPP")
#  field(DOL3, "XF:02ID-ID{BPM}Val:Alpha-I NPP")
#  field(DOL4, "XF:02ID-ID{BPM}Val:Alpha-I NPP")
#  field(LNK1, "XF:02ID-ID{BPM}Val:AngleXS-I.SMOO")
#  field(LNK2, "XF:02ID-ID{BPM}Val:AngleYS-I.SMOO")
#  field(LNK3, "XF:02ID-ID{BPM}Val:PosXS-I.SMOO")
#  field(LNK4, "XF:02ID-ID{BPM}Val:PosYS-I.SMOO")
#  field(SELM, "All")
#}

record(ao, "XF:02ID-ID{BPM}Val:AngleX-SP"){
  field(VAL, "0.005")
  field(PREC, "4")
  field(EGU, "mrad")
  info(autosaveFields, "VAL")
}

record(calc, "XF:02ID-ID{BPM}Val:AngleX-I"){
  field(INPA, "SR:APHLA:SOFB{BUMP:C02-SIX}angle:X-I CP NMS")
  field(INPB, "XF:02ID-ID{BPM}Val:AngleX-SP PP NMS")
  field(CALC, "(A - B)")
  field(HHSV, "MAJOR")
  field(HSV,  "MINOR")
  field(LSV,  "MINOR")
  field(LLSV, "MAJOR")
  field(PREC, "4")
  field(EGU,  "mrad")
  info(autosaveFields, "SCAN HIHI HIGH LOW LOLO")
}

#record(ai, "XF:02ID-ID{BPM}Val:AngleXS-I"){
#  field(INP, "XF:02ID-ID{BPM}Val:AngleX-I PP MS")
#  field(SCAN, ".1 second")
#  field(PREC, "4")
#  field(EGU,  "mrad")
#  field(SMOO, "0.1")
#}

record(ao, "XF:02ID-ID{BPM}Val:AngleY-SP"){
  field(VAL, "-0.015")
  field(PREC, "4")
  field(EGU, "mrad")
  info(autosaveFields, "VAL")
}
record(calc, "XF:02ID-ID{BPM}Val:AngleY-I"){
  field(INPA, "SR:APHLA:SOFB{BUMP:C02-SIX}angle:Y-I CP NMS")
  field(INPB, "XF:02ID-ID{BPM}Val:AngleY-SP PP NMS")
  field(CALC, "(A - B)")
  field(HHSV, "MAJOR")
  field(HSV,  "MINOR")
  field(LSV,  "MINOR")
  field(LLSV, "MAJOR")
  field(PREC, "4")
  field(EGU,  "mrad")
  info(autosaveFields, "SCAN HIHI HIGH LOW LOLO")
}
#record(ai, "XF:02ID-ID{BPM}Val:AngleYS-I"){
#  field(INP, "XF:02ID-ID{BPM}Val:AngleY-I PP")
#  field(SCAN, ".1 second")
#  field(PREC, "4")
#  field(EGU,  "mrad")
#  field(SMOO, "0.1")
#}
record(ao, "XF:02ID-ID{BPM}Val:PosX-SP"){
  field(VAL, "0.0")
  field(PREC, "4")
  field(EGU, "mm")
  info(autosaveFields, "VAL")
}
record(calc, "XF:02ID-ID{BPM}Val:PosX-I"){
  field(INPA, "SR:APHLA:SOFB{BUMP:C02-SIX}offset:X-I CP NMS")
  field(INPB, "XF:02ID-ID{BPM}Val:PosX-SP PP NMS")
  field(HHSV, "MAJOR")
  field(HSV,  "MINOR")
  field(LSV,  "MINOR")
  field(LLSV, "MAJOR")
  field(CALC, "(A - B)")
  field(PREC, "4")
  field(EGU,  "mm")
  info(autosaveFields, "SCAN HIHI HIGH LOW LOLO")
}
#record(ai, "XF:02ID-ID{BPM}Val:PosXS-I"){
#  field(INP, "XF:02ID-ID{BPM}Val:PosX-I PP MS")
#  field(SCAN, ".1 second")
#  field(PREC, "4")
#  field(EGU,  "mm")
#  field(SMOO, "0.1")
#}
record(ao, "XF:02ID-ID{BPM}Val:PosY-SP"){
  field(VAL, "0.0")
  field(PREC, "4")
  field(EGU, "mm")
  info(autosaveFields, "VAL")
}
record(calc, "XF:02ID-ID{BPM}Val:PosY-I"){
  field(INPA, "SR:APHLA:SOFB{BUMP:C02-SIX}offset:Y-I CP NMS")
  field(INPB, "XF:02ID-ID{BPM}Val:PosY-SP PP NMS")
  field(HHSV, "MAJOR")
  field(HSV,  "MINOR")
  field(LSV,  "MINOR")
  field(LLSV, "MAJOR")
  field(CALC, "(A - B)")
  field(PREC, "4")
  field(EGU,  "mm")
  info(autosaveFields, "SCAN HIHI HIGH LOW LOLO")
}
#record(ai, "XF:02ID-ID{BPM}Val:PosYS-I"){
#  field(INP, "XF:02ID-ID{BPM}Val:PosY-I PP MS")
#  field(SCAN, ".1 second")
#  field(PREC, "4")
#  field(EGU,  "mm")
#  field(SMOO, "0.1")
#}
